<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindCare AI - Enhanced Assistant</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX transformation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Lucide React Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Your existing styles -->
    <link rel="stylesheet" href="style.css">
    
    <style>
        @keyframes bounce {
            0%, 20%, 53%, 80%, 100% {
                animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
                transform: translate3d(0, 0, 0);
            }
            40%, 43% {
                animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);
                transform: translate3d(0, -30px, 0);
            }
            70% {
                animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);
                transform: translate3d(0, -15px, 0);
            }
            90% {
                transform: translate3d(0, -4px, 0);
            }
        }
        .animate-bounce {
            animation: bounce 1s infinite;
        }
    </style>
</head>
<body class="bg-gray-100">
    <!-- Navigation (copy from your existing files) -->
    <nav class="bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-4">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center">
                <span class="text-xl font-bold">ðŸ§  MindCare AI</span>
            </div>
            <div class="hidden md:flex space-x-6">
                <a href="index.html" class="hover:text-indigo-200">Home</a>
                <a href="features.html" class="hover:text-indigo-200">Features</a>
                <a href="ai-assistant.html" class="hover:text-indigo-200">AI Assistant</a>
                <a href="about.html" class="hover:text-indigo-200">About</a>
                <a href="contact.jsx" class="hover:text-indigo-200">Contact</a>
            </div>
            <div class="flex space-x-2">
                <a href="login_page.html" class="bg-white text-indigo-600 px-4 py-2 rounded-lg hover:bg-gray-100">Login</a>
                <a href="registration_page.html" class="bg-indigo-800 px-4 py-2 rounded-lg hover:bg-indigo-900">Register</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container mx-auto py-8 px-4">
        <div id="enhanced-chatbot-root"></div>
    </div>

    <!-- Enhanced Chatbot Component -->
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { Send, Book, Music, Heart, Sunrise, Wind, Headphones } = lucide;

        const EnhancedMindCareChatbot = () => {
          const [messages, setMessages] = useState([
            {
              id: 1,
              text: "Hello! I'm your Enhanced MindCare AI Assistant. I'm here to support you through any challenges you're facing. I can detect your mood and provide personalized recommendations including books, yoga, breathing exercises, music therapy, and mantras. How are you feeling today?",
              sender: 'bot',
              timestamp: new Date().toLocaleTimeString(),
              mood: null
            }
          ]);
          const [inputText, setInputText] = useState('');
          const [userMood, setUserMood] = useState(null);
          const [isTyping, setIsTyping] = useState(false);
          const messagesEndRef = useRef(null);

          const scrollToBottom = () => {
            messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
          };

          useEffect(() => {
            scrollToBottom();
          }, [messages]);

          // Enhanced mood and stress detection
          const detectMoodAndStress = (text) => {
            const stressKeywords = ['stressed', 'stress', 'anxiety', 'anxious', 'overwhelmed', 'pressure', 'tense', 'worried', 'panic', 'nervous', 'tension', 'burnout'];
            const depressionKeywords = ['depressed', 'depression', 'sad', 'hopeless', 'empty', 'worthless', 'lonely', 'tired', 'exhausted', 'unmotivated', 'down', 'low'];
            const positiveKeywords = ['happy', 'good', 'great', 'excellent', 'wonderful', 'amazing', 'fantastic', 'cheerful', 'excited', 'grateful'];
            
            const lowerText = text.toLowerCase();
            
            if (stressKeywords.some(keyword => lowerText.includes(keyword))) {
              return 'stressed';
            }
            if (depressionKeywords.some(keyword => lowerText.includes(keyword))) {
              return 'depressed';
            }
            if (positiveKeywords.some(keyword => lowerText.includes(keyword))) {
              return 'positive';
            }
            return 'neutral';
          };

          // Personalized recommendations based on mood
          const getRecommendations = (mood) => {
            const recommendations = {
              stressed: {
                books: ['The Power of Now by Eckhart Tolle', 'Wherever You Go, There You Are by Jon Kabat-Zinn', 'The Anxiety and Worry Workbook by David A. Clark', 'Full Catastrophe Living by Jon Kabat-Zinn'],
                activities: ['Deep breathing exercises (4-7-8 technique)', '10-minute morning walk in nature', 'Progressive muscle relaxation', 'Mindful meditation for 5-10 minutes', 'Take a warm bath with lavender'],
                music: ['Nature sounds (rain, ocean waves)', 'Classical music for relaxation', 'Binaural beats for stress relief', 'Soft instrumental music', 'Meditation music'],
                therapy: ['Cognitive Behavioral Therapy (CBT)', 'Mindfulness-based stress reduction', 'Online therapy sessions', 'Stress management counseling'],
                yoga: ['Child pose for 2 minutes', 'Cat-cow stretches', 'Legs up the wall pose', 'Gentle flow yoga sequence', 'Restorative yoga poses'],
                breathing: ['Box breathing (4-4-4-4)', 'Deep belly breathing', 'Alternate nostril breathing', '4-7-8 breathing technique', 'Coherent breathing (5-5)'],
                mantras: ['Om Shanti Shanti Shanti (Peace)', 'So Hum (I am)', 'Om Gam Ganapataye Namaha', 'Om Mani Padme Hum', 'Aham Brahmasmi (I am the universe)']
              },
              depressed: {
                books: ['Feeling Good by David D. Burns', 'The Happiness Trap by Russ Harris', 'Mind Over Mood by Dennis Greenberger', 'The Depression Cure by Stephen Ilardi'],
                activities: ['15-minute nature walk', 'Journaling for 10 minutes', 'Call a friend or family member', 'Create a gratitude list', 'Engage in a hobby you enjoy'],
                music: ['Uplifting acoustic playlist', 'Motivational songs', 'Feel-good classics from your favorite era', 'Instrumental hope music', 'Bhajans and devotional music'],
                therapy: ['Interpersonal therapy (IPT)', 'Behavioral activation therapy', 'Professional counseling', 'Support groups', 'Cognitive therapy'],
                yoga: ['Sun salutations', 'Heart opening poses (Camel, Cobra)', 'Warrior poses for strength', 'Gentle backbends', 'Standing poses for grounding'],
                breathing: ['Energizing breath (Kapalabhati)', 'Three-part breath (Dirga)', 'Ujjayi breathing', 'Breath of joy', 'Bhastrika (Bellows breath)'],
                mantras: ['Om Namah Shivaya', 'I am worthy of love and happiness', 'Om Gum Gurubhyo Namaha', 'So Ham (I am that)', 'Lokah Samastah Sukhino Bhavantu']
              }
            };

            return recommendations[mood] || recommendations.stressed;
          };

          const RecommendationCard = ({ icon: Icon, title, items, color }) => (
            React.createElement('div', {
              className: `bg-white rounded-xl p-4 shadow-md border-l-4 ${color} mb-3`
            }, [
              React.createElement('div', {
                className: "flex items-center mb-3",
                key: "header"
              }, [
                React.createElement(Icon, {
                  className: "mr-2 text-indigo-600",
                  size: 20,
                  key: "icon"
                }),
                React.createElement('h4', {
                  className: "font-semibold text-gray-800",
                  key: "title"
                }, title)
              ]),
              React.createElement('ul', {
                className: "space-y-2",
                key: "list"
              }, items.slice(0, 3).map((item, index) => 
                React.createElement('li', {
                  key: index,
                  className: "text-sm text-gray-700 flex items-start"
                }, [
                  React.createElement('span', {
                    className: "text-indigo-400 mr-2",
                    key: "bullet"
                  }, 'â€¢'),
                  item
                ])
              ))
            ])
          );

          const generateBotResponse = (userMessage, detectedMood) => {
            const recommendations = getRecommendations(detectedMood);
            
            let response = "";
            let showRecommendations = false;

            switch(detectedMood) {
              case 'stressed':
                response = "I understand you're feeling stressed right now. That's completely normal, and I'm here to help. Stress can feel overwhelming, but there are effective ways to manage it. Let me share some personalized techniques that can help you feel more centered and calm.";
                showRecommendations = true;
                break;
              case 'depressed':
                response = "I hear that you're going through a difficult time, and I want you to know that your feelings are valid. Depression can make everything feel harder, but please remember that you're not alone and there are paths forward. Here are some gentle approaches that might help lift your spirits.";
                showRecommendations = true;
                break;
              case 'positive':
                response = "I'm so glad to hear you're feeling good! It's wonderful when we can appreciate positive moments. Keep nurturing that positive energy - would you like some suggestions to maintain and amplify this great mood?";
                break;
              default:
                response = "Thank you for sharing with me. I'm here to listen and support you. Whether you're dealing with stress, feeling low, or just need someone to talk to, I have various evidence-based techniques and resources that might help. What would you like to explore together?";
            }

            return { text: response, recommendations: showRecommendations ? recommendations : null };
          };

          const handleSendMessage = () => {
            if (!inputText.trim()) return;

            const userMessage = {
              id: Date.now(),
              text: inputText,
              sender: 'user',
              timestamp: new Date().toLocaleTimeString()
            };

            setMessages(prev => [...prev, userMessage]);
            setInputText('');
            setIsTyping(true);

            // Simulate AI processing time
            setTimeout(() => {
              const detectedMood = detectMoodAndStress(inputText);
              setUserMood(detectedMood);
              
              const botResponse = generateBotResponse(inputText, detectedMood);
              
              const botMessage = {
                id: Date.now() + 1,
                text: botResponse.text,
                sender: 'bot',
                timestamp: new Date().toLocaleTimeString(),
                mood: detectedMood,
                recommendations: botResponse.recommendations
              };

              setMessages(prev => [...prev, botMessage]);
              setIsTyping(false);
            }, 1500);
          };

          const handleKeyPress = (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
              e.preventDefault();
              handleSendMessage();
            }
          };

          return React.createElement('div', {
            className: "max-w-4xl mx-auto bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl shadow-2xl overflow-hidden"
          }, [
            // Header
            React.createElement('div', {
              className: "bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-4",
              key: "header"
            }, 
              React.createElement('div', {
                className: "flex items-center"
              }, [
                React.createElement('div', {
                  className: "w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center mr-3",
                  key: "avatar"
                }, 
                  React.createElement(Heart, {
                    className: "text-white",
                    size: 20
                  })
                ),
                React.createElement('div', {
                  key: "info"
                }, [
                  React.createElement('h2', {
                    className: "text-lg font-semibold",
                    key: "title"
                  }, 'Enhanced MindCare AI Assistant'),
                  React.createElement('p', {
                    className: "text-sm opacity-90",
                    key: "status"
                  }, userMood ? `Detected mood: ${userMood}` : 'Ready to help â€¢ Online')
                ])
              ])
            ),

            // Chat Area
            React.createElement('div', {
              className: "h-96 overflow-y-auto p-4 bg-gray-50",
              key: "chat"
            }, [
              ...messages.map((message) => 
                React.createElement('div', {
                  key: message.id,
                  className: `mb-4 ${message.sender === 'user' ? 'text-right' : 'text-left'}`
                }, [
                  React.createElement('div', {
                    className: `inline-block max-w-xs lg:max-w-md px-4 py-2 rounded-2xl ${
                      message.sender === 'user' 
                        ? 'bg-indigo-600 text-white rounded-br-sm' 
                        : 'bg-white text-gray-800 shadow-md rounded-bl-sm'
                    }`,
                    key: "message"
                  }, [
                    React.createElement('p', {
                      className: "text-sm",
                      key: "text"
                    }, message.text),
                    React.createElement('p', {
                      className: "text-xs opacity-70 mt-1",
                      key: "time"
                    }, message.timestamp)
                  ]),
                  
                  // Recommendations
                  message.recommendations && React.createElement('div', {
                    className: "mt-4 max-w-2xl",
                    key: "recommendations"
                  }, [
                    React.createElement('h3', {
                      className: "text-lg font-semibold text-gray-800 mb-4",
                      key: "rec-title"
                    }, 'Personalized Recommendations for You:'),
                    React.createElement('div', {
                      className: "grid md:grid-cols-2 gap-3",
                      key: "rec-grid"
                    }, [
                      React.createElement(RecommendationCard, {
                        key: "books",
                        icon: Book,
                        title: "Helpful Books",
                        items: message.recommendations.books,
                        color: "border-blue-500"
                      }),
                      React.createElement(RecommendationCard, {
                        key: "breathing",
                        icon: Wind,
                        title: "Breathing Techniques",
                        items: message.recommendations.breathing,
                        color: "border-green-500"
                      }),
                      React.createElement(RecommendationCard, {
                        key: "yoga",
                        icon: Heart,
                        title: "Yoga & Movement",
                        items: message.recommendations.yoga,
                        color: "border-purple-500"
                      }),
                      React.createElement(RecommendationCard, {
                        key: "music",
                        icon: Music,
                        title: "Music Therapy",
                        items: message.recommendations.music,
                        color: "border-pink-500"
                      }),
                      React.createElement(RecommendationCard, {
                        key: "activities",
                        icon: Sunrise,
                        title: "Healing Activities",
                        items: message.recommendations.activities,
                        color: "border-yellow-500"
                      }),
                      React.createElement(RecommendationCard, {
                        key: "mantras",
                        icon: Headphones,
                        title: "Mantras & Chanting",
                        items: message.recommendations.mantras,
                        color: "border-indigo-500"
                      })
                    ]),
                    React.createElement('div', {
                      className: "mt-4 p-4 bg-blue-50 rounded-lg",
                      key: "therapy"
                    }, 
                      React.createElement('p', {
                        className: "text-sm text-blue-800"
                      }, [
                        React.createElement('strong', {
                          key: "label"
                        }, 'Professional Support: '),
                        message.recommendations.therapy.join(', ')
                      ])
                    )
                  ])
                ])
              ),
              
              isTyping && React.createElement('div', {
                className: "text-left mb-4",
                key: "typing"
              }, 
                React.createElement('div', {
                  className: "inline-block bg-white px-4 py-2 rounded-2xl shadow-md"
                }, 
                  React.createElement('div', {
                    className: "flex space-x-1"
                  }, [
                    React.createElement('div', {
                      className: "w-2 h-2 bg-gray-400 rounded-full animate-bounce",
                      key: "dot1"
                    }),
                    React.createElement('div', {
                      className: "w-2 h-2 bg-gray-400 rounded-full animate-bounce",
                      style: {animationDelay: '0.1s'},
                      key: "dot2"
                    }),
                    React.createElement('div', {
                      className: "w-2 h-2 bg-gray-400 rounded-full animate-bounce",
                      style: {animationDelay: '0.2s'},
                      key: "dot3"
                    })
                  ])
                )
              ),
              React.createElement('div', {
                ref: messagesEndRef,
                key: "scroll-target"
              })
            ]),

            // Input Area
            React.createElement('div', {
              className: "p-4 bg-white border-t",
              key: "input-area"
            }, [
              React.createElement('div', {
                className: "flex space-x-2",
                key: "input-row"
              }, [
                React.createElement('textarea', {
                  value: inputText,
                  onChange: (e) => setInputText(e.target.value),
                  onKeyPress: handleKeyPress,
                  placeholder: "Share what's on your mind... I'm here to listen and help with personalized recommendations.",
                  className: "flex-1 resize-none border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",
                  rows: "1",
                  style: { minHeight: '40px', maxHeight: '100px' },
                  key: "textarea"
                }),
                React.createElement('button', {
                  onClick: handleSendMessage,
                  disabled: !inputText.trim() || isTyping,
                  className: "bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",
                  key: "send-btn"
                }, 
                  React.createElement(Send, {
                    size: 18
                  })
                )
              ]),
              
              // Quick Actions
              React.createElement('div', {
                className: "mt-3 flex flex-wrap gap-2",
                key: "quick-actions"
              }, [
                React.createElement('button', {
                  onClick: () => setInputText("I'm feeling stressed and overwhelmed"),
                  className: "px-3 py-1 text-xs bg-orange-100 text-orange-700 rounded-full hover:bg-orange-200 transition-colors",
                  key: "stress-btn"
                }, "I'm stressed"),
                React.createElement('button', {
                  onClick: () => setInputText("I'm feeling sad and depressed"),
                  className: "px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded-full hover:bg-blue-200 transition-colors",
                  key: "sad-btn"
                }, "I'm feeling down"),
                React.createElement('button', {
                  onClick: () => setInputText("I need some breathing exercises"),
                  className: "px-3 py-1 text-xs bg-green-100 text-green-700 rounded-full hover:bg-green-200 transition-colors",
                  key: "breathing-btn"
                }, "Need breathing help"),
                React.createElement('button', {
                  onClick: () => setInputText("Can you suggest some calming music?"),
                  className: "px-3 py-1 text-xs bg-purple-100 text-purple-700 rounded-full hover:bg-purple-200 transition-colors",
                  key: "music-btn"
                }, "Music therapy")
              ])
            ])
          ]);
        };

        ReactDOM.render(
          React.createElement(EnhancedMindCareChatbot),
          document.getElementById('enhanced-chatbot-root')
        );
    </script>

    <!-- Footer (copy from your existing files) -->
    <footer class="bg-gray-800 text-white py-8 mt-16">
        <div class="container mx-auto text-center">
            <p>&copy; 2024 MindCare AI. All rights reserved.</p>
        </div>
    </footer>
</body>
</html>